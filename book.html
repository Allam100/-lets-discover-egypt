<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Book Tour | Let's Discover Egypt</title>
  <link rel="icon" href="favicon.png" type="image/png">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background: #f9f9f9;
    }
    header {
      background: #222;
      color: white;
      padding: 15px;
      text-align: center;
      font-size: 22px;
      font-weight: bold;
    }
    .container {
      max-width: 900px;
      margin: 30px auto;
      background: white;
      padding: 25px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 25px;
    }
    th, td {
      padding: 12px;
      text-align: center;
      border: 1px solid #ddd;
    }
    th {
      background-color: #f2f2f2;
    }
    input[type="number"] {
      width: 60px;
      padding: 6px;
    }
    .form-group {
      margin-bottom: 15px;
    }
    label {
      display: block;
      margin-bottom: 6px;
      font-weight: bold;
    }
    input[type="text"],
    input[type="date"],
    select {
      width: 100%;
      padding: 10px;
      font-size: 16px;
    }
    .total {
      font-weight: bold;
      color: green;
    }
    button {
      background: #28a745;
      color: white;
      padding: 12px 20px;
      font-size: 18px;
      border: none;
      cursor: pointer;
      width: 100%;
    }
    button:hover {
      background: #218838;
    }
  </style>
</head>
<body>

<header>
  Book Your Tour – Let’s Discover Egypt
</header>

<div class="container">

  <h2>Tour Pricing</h2>
  <table id="pricing-table">
    <thead>
      <tr>
        <th>Category</th>
        <th>Price per Person</th>
        <th>Quantity</th>
        <th>Subtotal</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>Adults</td>
        <td>$40</td>
        <td><input type="number" value="0" min="0" class="qty" data-price="40"></td>
        <td class="subtotal">$0</td>
      </tr>
      <tr>
        <td>Children (6-11)</td>
        <td>$25</td>
        <td><input type="number" value="0" min="0" class="qty" data-price="25"></td>
        <td class="subtotal">$0</td>
      </tr>
      <tr>
        <td>Infants (0-5)</td>
        <td>$0</td>
        <td><input type="number" value="0" min="0" class="qty" data-price="0"></td>
        <td class="subtotal">$0</td>
      </tr>
    </tbody>
    <tfoot>
      <tr>
        <td colspan="3" class="total">Total</td>
        <td id="total-price" class="total">$0</td>
      </tr>
    </tfoot>
  </table>

  <form id="booking-form">
    <div class="form-group">
      <label for="fullname">Full Name</label>
      <input type="text" id="fullname" required>
    </div>

    <div class="form-group">
      <label for="nationality">Nationality</label>
      <input type="text" id="nationality" required>
    </div>

    <div class="form-group">
      <label for="phone">WhatsApp Number</label>
      <input type="text" id="phone" placeholder="+20..." required>
    </div>

    <div class="form-group">
      <label for="tour-date">Choose Date</label>
      <input type="date" id="tour-date" required min="<?= date('Y-m-d') ?>">
    </div>

    <div class="form-group">
      <label for="tour-time">Choose Time</label>
      <select id="tour-time" required>
        <option value="" disabled selected>Select Time</option>
        <option value="07:00 AM">7:00 AM</option>
        <option value="08:00 AM">8:00 AM</option>
        <option value="09:00 AM">9:00 AM</option>
        <option value="10:00 AM">10:00 AM</option>
        <option value="11:00 AM">11:00 AM</option>
        <option value="12:00 PM">12:00 PM</option>
        <option value="01:00 PM">1:00 PM</option>
        <option value="02:00 PM">2:00 PM</option>
      </select>
    </div>

    <button type="button" onclick="sendWhatsApp()">Confirm via WhatsApp</button>
  </form>

</div>

<script>
  const qtyInputs = document.querySelectorAll('.qty');
  const subtotals = document.querySelectorAll('.subtotal');
  const totalPriceEl = document.getElementById('total-price');

  qtyInputs.forEach((input, index) => {
    input.addEventListener('input', () => {
      const price = parseFloat(input.dataset.price);
      const quantity = parseInt(input.value) || 0;
      const subtotal = price * quantity;
      subtotals[index].textContent = `$${subtotal}`;
      calculateTotal();
    });
  });

  function calculateTotal() {
    let total = 0;
    subtotals.forEach(sub => {
      total += parseFloat(sub.textContent.replace('$','')) || 0;
    });
    totalPriceEl.textContent = `$${total}`;
  }

  function sendWhatsApp() {
    const name = document.getElementById('fullname').value.trim();
    const nationality = document.getElementById('nationality').value.trim();
    const phone = document.getElementById('phone').value.trim();
    const date = document.getElementById('tour-date').value;
    const time = document.getElementById('tour-time').value;
    const total = totalPriceEl.textContent;

    let msg = `Hello, I would like to book a tour.\n\nName: ${name}\nNationality: ${nationality}\nWhatsApp: ${phone}\nDate: ${date}\nTime: ${time}\nTotal: ${total}`;

    window.open(`https://wa.me/201234567890?text=${encodeURIComponent(msg)}`, '_blank');
  }
</script>

</body>
</html>
